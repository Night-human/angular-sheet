Three steps, in template and class